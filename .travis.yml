language: ruby
rvm:
  - 2.4.2
  - 2.3.5
  - 2.2.8
  - 2.1.10
gemfile:
  - gemfiles/rails_5_1.gemfile
  - gemfiles/rails_5_0.gemfile
  - gemfiles/rails_4_2.gemfile
  - gemfiles/rails_4_1.gemfile
  - gemfiles/rails_4_0.gemfile
  - gemfiles/rails_3_2.gemfile
branches:
  only:
    - master
    - travis

matrix:
  exclude:
    # NOTE: rails 5.x requires Ruby version >= 2.2.2
    - rvm: 2.1.10
      gemfile: gemfiles/rails_5_1.gemfile
    - rvm: 2.1.10
      gemfile: gemfiles/rails_5_0.gemfile
    # NOTE: rails 4.2.8 is the first release with Ruby 2.4 support
    - rvm: 2.4.2
      gemfile: gemfiles/rails_4_1.gemfile
    - rvm: 2.4.2
      gemfile: gemfiles/rails_4_0.gemfile
    - rvm: 2.4.2
      gemfile: gemfiles/rails_3_2.gemfile
